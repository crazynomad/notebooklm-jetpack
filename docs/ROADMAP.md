# 开发计划

> 更新日期：2026-02-27

## 当前状态

v1.0.0 — 核心功能已实现，尚未发布到 Chrome Web Store。

### 已完成 ✅

- [x] 单个 URL 一键导入
- [x] 批量 URL / 全标签页导入
- [x] YouTube 播放列表导入（需订阅验证）
- [x] RSS/Atom 源导入
- [x] 文档站点智能导入（7 框架）
- [x] Claude 对话提取+导入
- [x] 右键菜单快捷导入
- [x] 导入历史记录
- [x] 批量导入失败重试

---

## Phase 1：发布准备 🚀

> 目标：让扩展可以上架 Chrome Web Store

### 1.1 关键修复
- [ ] 配置真实的 Google OAuth client_id
- [ ] NotebookLM DOM 选择器验证 — 确认当前版本的选择器仍然有效
- [ ] Claude 对话提取选择器验证
- [ ] 错误处理完善 — 用户友好的错误提示

### 1.2 上架准备
- [ ] Chrome Web Store 开发者账号
- [ ] 扩展截图 & 宣传图（至少 5 张）
- [ ] 详细的商店描述（中英文）
- [ ] 隐私政策页面
- [ ] 扩展图标优化（当前图标待确认质量）

### 1.3 基础质量
- [ ] 基本的 E2E 冒烟测试
- [ ] 构建产物体积优化
- [ ] Console 日志清理（移除开发调试日志）

---

## Phase 2：体验优化 🎨

> 目标：提升日常使用体验

### 2.1 核心体验
- [ ] **笔记本选择器** — 导入时可以选择目标笔记本（当前依赖已打开的笔记本）
- [ ] **导入预览** — 导入前预览页面标题/摘要
- [ ] **导入进度通知** — 批量导入时浏览器通知进度
- [ ] **键盘快捷键** — 一键导入当前页面（Ctrl+Shift+N 之类）
- [ ] **一键导入所有标签页** — Popup 内展示当前窗口所有标签页列表，勾选后一键批量导入，Popup 内实时进度条逐条更新（适合演示：「点一下，进度条跑，10 个全进去了」）

### 2.2 UI 打磨
- [ ] 深色模式支持
- [ ] 动画/过渡效果
- [ ] 导入成功/失败的 Toast 提示
- [ ] Popup 窗口大小自适应

### 2.3 稳定性
- [ ] DOM 选择器降级策略 — 多套选择器 fallback
- [ ] 导入超时处理
- [ ] 网络错误重试机制
- [ ] Sentry 或类似的错误追踪
- [ ] **批量抓取 Rate Limit 精细化** — 可配置的并发上限与请求间隔（域名级别），防止目标站点封锁；在 UI 中暴露参数让用户自行调节激进/保守模式
- [ ] **批量导入内存优化** — 大批量任务改为流式分批处理，避免 Service Worker 因任务队列堆积而被浏览器终止；监控内存水位并自动降速

---

## Phase 3：功能扩展 🔧

> 目标：拉开与竞品差距

### 3.1 新导入源
- [ ] **微信公众号文章导入** — 解析微信文章页面，提取正文
- [ ] **ChatGPT 对话导入** — 类似 Claude 的对话提取
- [ ] **Gemini 对话导入**
- [ ] **Twitter/X 线程导入** — 提取长推文串
- [ ] **PDF 上传导入** — 本地 PDF 直接导入
- [ ] **Notion 类文章增强支持** 💎 — 处理 Notion 页面特有结构（数据库视图、callout 块、嵌套页面、Toggle 等），提取正文时过滤 UI 噪声，保留语义层次；同时覆盖 Notion 托管的公开文档站点
- [ ] **Medium 文章精细化导入** — 处理 Medium 付费墙检测与绕过提示、代码块语法还原、Embed 卡片转文本、引用块层级保留，提取 canonical 正文；区分 Member-only 内容并给出友好提示

### 3.2 高级功能
- [ ] **音频概述下载** — 下载 NotebookLM 生成的播客音频
- [ ] **播客 RSS 同步** — 自动同步播客源到笔记本
- [ ] **定时导入** — 定期检查 RSS 源并自动导入新文章
- [ ] **导入模板** — 保存常用的导入配置
- [ ] **NotebookLM 专属提示词库** 💎 — 在 Popup 界面内置精选提示词（按场景分类：总结摘要、深度分析、播客脚本生成、学习测验等），一键复制到 NotebookLM 对话框；支持用户自定义提示词并云端同步
- [ ] **文章原图抓取** — 导入文章时同步抓取正文内嵌图片，转为 base64 嵌入 Markdown 或作为附件一并导入，避免 NotebookLM 收到纯文本时丢失图表/截图信息
- [ ] **文档内容自动分段导入** — 检测内容字节数是否超过 NotebookLM 单个来源上限（约 500KB），超出时自动按章节/段落切割为多个来源顺序导入，并在标题中注明「Part 1/N」
- [ ] **文档站实时订阅更新** — 对已导入的文档站建立轮询订阅，定期对比 sitemap/llms.txt 变更，新增或更新页面自动推送到对应笔记本；可设置检查频率与静默时段

### 3.3 更多文档框架
- [ ] Nextra
- [ ] Starlight (Astro)
- [ ] Confluence
- [ ] Notion 文档站 💎（含 Notion 类文章增强支持，见 3.1）

---

## Phase 3.5：服务端基础设施 🖥️（条件触发）

> **触发条件：订阅用户超过 200 人后启动评估**
>
> 此阶段涉及架构跃迁——从纯客户端扩展引入服务器端能力，需要额外的运维成本与安全审计，因此设置订阅里程碑作为启动门槛。

- [ ] **服务器端批量抓取渲染** — 将 JS 渲染型页面（SPA 文档站、需登录内容）的抓取任务卸载到云端无头浏览器（Playwright/Puppeteer），解除 Chrome 扩展的并发上限、超时限制与 CSP 约束；客户端仅负责调度与结果写入 NotebookLM
  - 子任务：任务队列设计（Bull/BullMQ 或轻量自建）
  - 子任务：鉴权与用户配额管理
  - 子任务：服务器安全隔离（沙箱渲染，防止 SSRF）

---

## Phase 4：商业化 & 增长 📈

> 目标：可持续发展

### 4.1 增长
- [ ] 频道订阅引导优化
- [ ] 分享/推荐机制
- [ ] 使用数据统计（匿名、本地）
- [ ] 多语言 UI（英/中/日）

### 4.2 商业化（可选）

> 💎 = 会员专属功能（Membership）

- [ ] 高级功能付费（微信导入等）
- [ ] 团队/企业版
- [ ] API 接口

**会员专属功能 Backlog：**

| 功能 | 说明 | 阶段 |
|------|------|------|
| 💎 NotebookLM 专属提示词库 | Popup 内置分类提示词 + 用户自定义 + 云端同步 | Phase 3.2 |
| 💎 Notion 类文章增强支持 | Notion 页面结构深度解析，含 database/callout/toggle 等块 | Phase 3.1 |
| 💎 文章原图抓取 | 正文图片 base64 内嵌或附件导入，保留图表信息 | Phase 3.2 |
| 💎 文档内容自动分段导入 | 超上限时自动拆分为多个来源顺序导入（Part 1/N） | Phase 3.2 |
| 💎 文档站实时订阅更新 | 定期监听站点变更，新页面自动推送到笔记本 | Phase 3.2 |
| 🖥️ 服务器端批量抓取渲染 | 云端无头浏览器渲染 SPA/登录内容；**触发：200+ 订阅者** | Phase 3.5 |

---

## 技术债

| 项 | 优先级 | 说明 |
|----|--------|------|
| 无测试 | 🔴 高 | 至少需要 service 层的单元测试 |
| OAuth 占位符 | 🔴 高 | 需要真实 client_id |
| DOM 选择器脆弱 | 🟡 中 | 需要 fallback 策略 + 定期验证 |
| 无错误追踪 | 🟡 中 | 线上问题无法感知 |
| 无 CI/CD | 🟡 中 | 手动构建+打包 |
| 无版本发布流程 | 🟢 低 | 需要 changelog + 自动发版 |

---

## 优先级排序

**立即要做（本周）：**
1. Phase 1.1 — 关键修复，确保功能正常
2. Phase 1.2 — 上架准备材料

**短期（1-2 周）：**
3. Phase 1.3 — 基础质量保障
4. Phase 2.1 — 核心体验优化

**中期（1 个月）：**
5. Phase 3.1 — 微信公众号导入（差异化卖点）
6. Phase 2.3 — 稳定性提升

**长期：**
7. Phase 3.2/3.3 — 高级功能
8. Phase 4 — 商业化
